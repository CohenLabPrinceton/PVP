

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Software Overview &mdash; PVP 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/pvp_theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/pvp_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/pvp_logo_favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GUI" href="gui.html" />
    <link rel="prev" title="Enclosure" href="hardware_enclosure.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> PVP
          

          
            
            <img src="_static/pvp_logo_only.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">System Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Hardware:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hardware_overview.html">Hardware Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware_sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware_actuators.html">Actuators</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware_electronics.html">Electronics</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware_enclosure.html">Enclosure</a></li>
</ul>
<p class="caption"><span class="caption-text">Software:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pvp-modules">PVP Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="alarm.html">Alarm</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinator.html">Coordinator</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Ventilator Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasheets.html">Datasheets &amp; Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="specs.html">Specifications</a></li>
</ul>
<p class="caption"><span class="caption-text">Meta:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog/index.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildthedocs.html">Building the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_markdown.html">Markdown Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="meta_index.html">Index</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PVP</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Software Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/software_overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-overview">
<span id="id1"></span><h1>Software Overview<a class="headerlink" href="#software-overview" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="_images/gui_overview_v1_1920px.png"><img alt="Gui Overview - modular design, alarm cards, multiple modalities of input, alarm limits represented consistently across ui" src="_images/gui_overview_v1_1920px.png" style="width: 100%;" /></a>
<p>PVP is modularly designed to facilitate future adaptation to new hardware configurations and ventilation modes. APIs were designed for each of the modules to a) make them easily inspected and configured and b) make it clear to future developers how to adapt the system to their needs.</p>
<p>PVP runs as multiple independent processes The GUI provides an interface to control and monitor ventilation, and the controller process handles the ventilation logic and interfaces with the hardware. Inter-process communication is mediated by a coordinator module via xml-rpc. Several ’common’ modules facilitate system configuration and constitute the inter-process API. We designed  the API around a uni-fied, configurablevaluesmodule that allow the GUI andcontroller to be reconfigured while also ensuring system robustness and simplicity.</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="gui.html#gui-overview"><span class="std std-ref">GUI</span></a> and <a class="reference internal" href="coordinator.html#coordinator-overview"><span class="std std-ref">Coordinator</span></a> run in the first process, receive user input, display system status, and relay <a class="reference internal" href="pvp.common.message.html#pvp.common.message.ControlSetting" title="pvp.common.message.ControlSetting"><code class="xref py py-class docutils literal notranslate"><span class="pre">ControlSetting</span></code></a> s to the <a class="reference internal" href="controller.html#controller-overview"><span class="std std-ref">Controller</span></a> .</p></li>
<li><p>At launch, the <a class="reference internal" href="coordinator.html#coordinator-overview"><span class="std std-ref">Coordinator</span></a> spawns a <a class="reference internal" href="controller.html#controller-overview"><span class="std std-ref">Controller</span></a> that runs the logic of the ventilator based on control values from the GUI.</p></li>
<li><p>The <a class="reference internal" href="controller.html#controller-overview"><span class="std std-ref">Controller</span></a> communicates with a third <a class="reference external" href="http://abyz.me.uk/rpi/pigpio/">pigpiod</a> process which communicates with the ventilation hardware</p></li>
</ul>
<p>PVP is configured by</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="pvp.common.values.html#values-overview"><span class="std std-ref">Values</span></a> module parameterizes the different sensor and control values displayed by the GUI and used by the controller</p></li>
<li><p>The <a class="reference internal" href="pvp.common.prefs.html#prefs-overview"><span class="std std-ref">Prefs</span></a> module creates a <code class="docutils literal notranslate"><span class="pre">prefs.json</span></code> file in <code class="docutils literal notranslate"><span class="pre">~/pvp</span></code> that defines user-specific preferences.</p></li>
</ul>
<p>PVP is launched like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pvp</span><span class="o">.</span><span class="n">main</span>
</pre></div>
</div>
<p>And launch options can be displayed with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> flag.</p>
<div class="section" id="pvp-modules">
<h2>PVP Modules<a class="headerlink" href="#pvp-modules" title="Permalink to this headline">¶</a></h2>
<div class="software-summary">
    <a href="gui.html"><h2>GUI</h2></a> <p>A modular GUI with intuitive controls and a clear alarm system that can be configured to control any parameter or display values from any sensor.</p>
    <a href="controller.html"><h2>Controller</h2></a> <p> A module to handle the ventilation logic, build around a gain-adjusted PID controller.</p>
    <a href="io.html"><h2>IO</h2></a> <p>A hardware abstraction layer powered by <a href="http://abyz.me.uk/rpi/pigpio/">pigpio</a> that can read/write at >300 Hz</p>
    <a href="alarm.html"><h2>Alarm</h2></a> <p>Define complex and responsive alarm triggering criteria with human-readable Alarm Rules</p>
    <a href="common.html"><h2>Common</h2><a> <p>Modules that provide the API between the GUI and controller, user preferences, and other utilities</p>
</div></div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gui.html" class="btn btn-neutral float-right" title="GUI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hardware_enclosure.html" class="btn btn-neutral float-left" title="Enclosure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, jonny saunders et al

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>